!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("axios")):"function"==typeof define&&define.amd?define(["axios"],e):t["@wazo/sdk"]=e(t.axios)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={server:null,token:null};var a=a=>{const n=`https://${e.server}/api/auth/0.1/token`,o={backend:a.backend||"wazo_user",expiration:a.expiration||3600},s={auth:{username:a.username,password:a.password}};t.post(n,o,s).then(t=>((t,a)=>{e.token=t.data.data.token,a&&a(e.token)})(t,a.callback))};var n=a=>{if(e.token){const n=`https://${e.server}/api/auth/0.1/token/${e.token}`;t.delete(n).then((t=>{e.token=null,t&&t(e.token)})(a.callback))}};return{client:class{constructor(t){this.logIn=a,this.logOut=n,this.server=t}},init:t=>{e.server=t.server},logIn:a,logOut:n,calls:a=>{const n=`https://${e.server}/api/ctid-ng/1.0/applications/${a.applicationUuid}/calls`,o={headers:{"X-Auth-Token":a.token,"Content-Type":"application/json"}};t.get(n,o).then(t=>((t,a)=>{e.data=t.data,a&&a(e.data)})(t,a.callback))},hangupCall:a=>{const n=`https://${e.server}/api/ctid-ng/1.0/applications/${a.applicationUuid}/calls/${a.callID}`,o={headers:{"X-Auth-Token":a.token,"Content-Type":"application/json"}};t.delete(n,o).then(t=>((t,a)=>{e.data=t.data,a&&a(e.data)})(t,a.callback))}}});
